<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Breakout</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
    <style>
        body { margin: 0; display: flex; flex-direction: column; justify-content: center; align-items: center; height: 100vh; background: #0f172a; overflow: hidden; color: #f8fafc; font-family: 'Inter', system-ui, sans-serif; }
        canvas { box-shadow: 0 25px 50px -12px rgba(0,0,0,0.5); border: 4px solid #334155; border-radius: 12px; }
        #ui { margin-bottom: 2rem; text-align: center; }
        h1 { margin: 0; font-size: 3rem; font-weight: 800; letter-spacing: -0.025em; }
        p { color: #94a3b8; margin-top: 0.5rem; }
        .game-over { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(15, 23, 42, 0.9); padding: 2rem; border-radius: 12px; border: 2px solid #ef4444; text-align: center; display: none; z-index: 100; }
        .game-over h2 { color: #ef4444; margin: 0 0 1rem; }
        .game-over button { background: #10b981; color: white; border: none; padding: 0.5rem 1rem; border-radius: 6px; cursor: pointer; font-weight: bold; }
        
    </style>
</head>
<body>
    <div id="ui">
        <h1>Breakout</h1>
        <p>Generic Project View</p>
    </div>
    <script>

    // --- Configuration ---
    const SCREEN_WIDTH = 800.0;
    const SCREEN_HEIGHT = 600.0;
    const PADDLE_WIDTH = 100.0;
    const PADDLE_HEIGHT = 15.0;
    const PADDLE_SPEED = 6.0;
    const BALL_RADIUS = 8.0;
    const BALL_SPEED = 5.0;
    const BRICK_ROWS = 8;
    const BRICK_COLS = 10;
    const BRICK_WIDTH = 75.0;
    const BRICK_HEIGHT = 20.0;
    const INITIAL_LIVES = 3;

    // --- Global State ---
    let state = {
        paddle_curr: {},
        paddle_next: {},
        ball_curr: {},
        ball_next: {},
        bricks_curr: {},
        bricks_next: {},
        score_curr: {},
        score_next: {},
        game_state_curr: {},
        game_state_next: {},
    };

    // --- Pure Logic Functions ---
// Generic Logic Placeholder
    // --- Generated Wrappers ---
    function Wrapper_InitPaddle() {
        state.paddle_next = Logic_InitPaddle();
        state.paddle_curr = state.paddle_next;
    }

    function Wrapper_InitBall() {
        state.ball_next = Logic_InitBall();
        state.ball_curr = state.ball_next;
    }

    function Wrapper_InitBricks() {
        state.bricks_next = Logic_InitBricks();
        state.bricks_curr = state.bricks_next;
    }

    function Wrapper_InitScore() {
        state.score_next = Logic_InitScore();
        state.score_curr = state.score_next;
    }

    function Wrapper_InitGameState() {
        state.game_state_next = Logic_InitGameState();
        state.game_state_curr = state.game_state_next;
    }

    function Wrapper_UpdateGameState() {
        state.game_state_next = Logic_UpdateGameState(state.game_state_curr);
    }

    function Wrapper_ProcessInput() {
        const results = Logic_ProcessInput(state.paddle_curr, state.ball_curr);
        state.paddle_next = results.paddle;
        state.ball_next = results.ball;
    }

    function Wrapper_MovePaddle() {
        state.paddle_next = Logic_MovePaddle(state.paddle_curr);
    }

    function Wrapper_MoveBall() {
        state.ball_next = Logic_MoveBall(state.ball_curr);
    }

    function Wrapper_CheckPaddleCollision() {
        state.ball_next = Logic_CheckPaddleCollision(state.ball_curr, state.paddle_curr);
    }

    function Wrapper_CheckWallCollision() {
        state.ball_next = Logic_CheckWallCollision(state.ball_curr);
    }

    function Wrapper_CheckBrickCollision() {
        const results = Logic_CheckBrickCollision(state.ball_curr, state.bricks_curr);
        state.ball_next = results.ball;
        state.bricks_next = results.bricks;
    }

    function Wrapper_CheckBallLost() {
        const results = Logic_CheckBallLost(state.ball_curr, state.score_curr, state.game_state_curr);
        state.ball_next = results.ball;
        state.score_next = results.score;
        state.game_state_next = results.game_state;
    }

    function Wrapper_UpdateScore() {
        state.score_next = Logic_UpdateScore(state.score_curr, state.bricks_curr);
    }

    function Wrapper_CheckWinCondition() {
        state.game_state_next = Logic_CheckWinCondition(state.bricks_curr, state.game_state_curr);
    }

    // --- Procedures ---
    function SwapBuffers() {
        state.paddle_curr = { ...state.paddle_next, pos_x: state.paddle_next.pos_x ? [...state.paddle_next.pos_x]:undefined, pos_y: state.paddle_next.pos_y ? [...state.paddle_next.pos_y]:undefined };
        state.ball_curr = { ...state.ball_next, pos_x: state.ball_next.pos_x ? [...state.ball_next.pos_x]:undefined, pos_y: state.ball_next.pos_y ? [...state.ball_next.pos_y]:undefined };
        state.bricks_curr = { ...state.bricks_next, pos_x: state.bricks_next.pos_x ? [...state.bricks_next.pos_x]:undefined, pos_y: state.bricks_next.pos_y ? [...state.bricks_next.pos_y]:undefined };
        state.score_curr = { ...state.score_next, pos_x: state.score_next.pos_x ? [...state.score_next.pos_x]:undefined, pos_y: state.score_next.pos_y ? [...state.score_next.pos_y]:undefined };
        state.game_state_curr = { ...state.game_state_next, pos_x: state.game_state_next.pos_x ? [...state.game_state_next.pos_x]:undefined, pos_y: state.game_state_next.pos_y ? [...state.game_state_next.pos_y]:undefined };
    }

    function Setup() {
        Wrapper_InitPaddle();
        Wrapper_InitBall();
        Wrapper_InitBricks();
        Wrapper_InitScore();
        Wrapper_InitGameState();
    }

    function Loop() {
        Wrapper_UpdateGameState();
        Wrapper_ProcessInput();
        Wrapper_MovePaddle();
        Wrapper_MoveBall();
        Wrapper_CheckPaddleCollision();
        Wrapper_CheckWallCollision();
        Wrapper_CheckBrickCollision();
        Wrapper_CheckBallLost();
        Wrapper_UpdateScore();
        Wrapper_CheckWinCondition();
        SwapBuffers();
    }

    // --- p5.js Lifecycle ---
    function setup() {
        createCanvas(SCREEN_WIDTH, SCREEN_HEIGHT);
        const project_name = 'Breakout';
        Setup();
    }

    function draw() {
        background(15, 23, 42);
        Loop();
            text('Generic Visualization for ' + project_name, 20, 40);
    }

    function resetGame() {
        if(document.getElementById('game-over')) document.getElementById('game-over').style.display = 'none';
        Setup();
    }
    </script>
</body>
</html>
